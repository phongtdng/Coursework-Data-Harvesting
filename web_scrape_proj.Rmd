---
title: "Pink Tax Spain"
author: "Phong Duong, Nienke Visscher"
date: "2024-02-15"
output: html_document
---

# Library

```{r}
library(xml2)
library(httr)
library(tidyverse)
library(sf)
library(rnaturalearth)
library(scrapex)
```

# Mercadona

```{r}

```

# Clarel

### Data Collection

```{r}
clarel_url <- "https://www.clarel.es/es/"

category_url <- read_html(clarel_url) %>% 
  xml_find_all("//span[contains(@class, 'item_category-slide-item')]/a") %>% 
  xml_attr("href") %>% 
  paste0("https://www.clarel.es",.)
```

```{r}
clarel_hombre <- category_url[str_detect(category_url,"hombre")]

product_info_paths <- clarel_hombre %>%
  read_html() %>% 
  xml_find_all("//div[contains(@class, 'box_product-info')]")
```

```{r}
hombre_brands <- product_info_paths %>% 
  xml_find_all("div[contains(@class, 'product-featuredbrands')]") %>% 
  xml_text()

hombre_products <- product_info_paths %>% 
  xml_find_all("a") %>% 
  xml_text()

hombre_prices <- product_info_paths %>% 
  xml_find_all("div[contains(@class, 'product-price')]/span[contains(@class,'final-price')]") %>% 
  xml_text()

hombre_df <- as_tibble(cbind(hombre_brands, hombre_products, hombre_prices))

hombre_df
```
